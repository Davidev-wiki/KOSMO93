<%@ page language="java" contentType="text/html; charset=EUC-KR"
	pageEncoding="EUC-KR"%>
	
<%@ page import="javax.xml.parsers.DocumentBuilderFactory" %>
<%@ page import="javax.xml.parsers.DocumentBuilder" %>
<%@ page import="org.w3c.dom.Document" %>
<%@ page import="org.w3c.dom.NodeList" %>
<%@ page import="org.w3c.dom.Node" %>
<%@ page import="org.w3c.dom.Element" %>
<%@ page import="java.io.File" %>

<%@ page import="a.b.c.com.common.CommonXML" %>	
	
<!DOCTYPE html>
<html>
<head>
<meta charset="EUC-KR">
<title></title>
</head>
<body>
	<%!//컴에 있는 로컬 파일은 로컬의 절대경로를 
	//웹 서버에서 다룰때 는 웹 경로 : 상대경로를 사용한다.

	//jsp에서 함수를 사용하려면 <%! 블록 내에서 사용해야 한다.
	private static String getTagValue(String sTag, Element eElement) {

		NodeList nList = eElement.getElementsByTagName(sTag).item(0).getChildNodes();
		Node nValue = (Node) nList.item(0);
		return nValue.getNodeValue();

	}%>
	<%
		String xmlFilePath = CommonXML.XML_FILE_PATH;
		//
		File fXmlFile = new File(xmlFilePath + "/file.xml");

		DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
		DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();

		Document doc = dBuilder.parse(fXmlFile);
		doc.getDocumentElement().normalize();
		
		out.println("Root element : " + doc.getDocumentElement().getNodeName() + "<br>");
		NodeList nList = doc.getElementsByTagName("staff");
		out.println("-------------<br>");

		for (int temp = 0; temp < nList.getLength(); temp++) {
			Node nNode = nList.item(temp);
			if (nNode.getNodeType() == Node.ELEMENT_NODE) {

				Element eElement = (Element) nNode;

				out.println("First Name : " + getTagValue("firstname", eElement) + "<br>");
				out.println("Last Name : " + getTagValue("lastname", eElement) + "<br>");
				out.println("Nick Name : " + getTagValue("nickname", eElement) + "<br>");
				out.println("Salary : " + getTagValue("salary", eElement) + "<br>");

			}
		}
	%>
</body>
</html>