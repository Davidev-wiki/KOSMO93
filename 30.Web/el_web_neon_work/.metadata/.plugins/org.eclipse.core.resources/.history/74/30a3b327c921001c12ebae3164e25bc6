<%@page import="java.sql.ResultSet"%>
<%@page import="java.sql.PreparedStatement"%>
<%@ page language="java" contentType="text/html; charset=EUC-KR" pageEncoding="EUC-KR"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="EUC-KR">
<title>Insert title here</title>
</head>
<body>

<%

	// Obtain our environment naming context
	Context initCtx = new InitialContext();
	out.println("initCtx? : " + initCtx + "<br>");
	
	// initCtx의 lookup 메소드를 이용,
	// "java:comp/env"에 해당하는 객체를 찾아 evnCtx에 삽입한다.
	Context envCtx = (Context) initCtx.lookup("java:comp/env");
	out.println("envCtx : " + envCtx + "<br>");
	
	// Look up our data source
	// envCtx의 lookup 메서드를 이용,
	// "jdbc/Oracle11g_orclKOSMO00"에 해당하는 객체를 찾아서 ds에 삽입
	// name="jdbc/Oracle11g_orclKOSMO00"
	DataSource ds = (DataSource)envCtx.lookup("jdbc/Oracle11g_orclKOSMO00");
	out.println("ds : " + ds +"<br><hr>");
	
	// getConnection 메서드를 ㅣㅇ용해 커넥션 풀로부터
	// 커넥션 객체를 얻어내어 conn 변수에 저장.
	Connection conn = ds.getConnection();
	PreparedStatement stmt = conn.prepareStatement("SELECT * FROM EMP");
	ResultSet rsRs = stmt.executeQuery();
	
	while(rsRs.next()){
		
		out.println(rsRs.getString(1) + " ");
		out.println(rsRs.getString(2) + " ");
		out.println(rsRs.getString(3) + " ");
		out.println(rsRs.getString(4) + " ");
		out.println(rsRs.getString(5) + " ");
		out.println(rsRs.getString(6) + " ");
		out.println(rsRs.getString(7) + " ");
		out.println(rsRs.getString(8) + " <br>");
		
	}
	
%>

</body>
</html>