<%@ page language="java" contentType="text/html; charset=EUC-KR" pageEncoding="EUC-KR"%>
<%@ page import="java.util.ArrayList" %>
<%@ page import="a.b.c.com.kosmo.notice.vo.NoticeVO" %>

<!DOCTYPE html>
<html>
<head>
<meta charset="EUC-KR">
<title>공지사항 전체 조회</title>
<style type="text/css">
	
	.li{
	text-align : center;
	}

</style>
<script  src="http://code.jquery.com/jquery-latest.min.js"></script>
<script>

	$(document).ready(function(){
		alert("jQuery 진입");

		// I(등록 버튼) 클릭
		$("#I").click(function(){
			location.href="/testKck/kck/notice/notice.html";
		});
		
		// SelectAll(전체 조회) 클릭
		$("#SALL").click(function(){
			var v1 = $("#ISUD_TYPE").val('SALL');
			forward(v1);
		});
		
		// Update
		$("#U").click(function(){
			var v2 = $("#ISUD_TYPE").val('Up');
			forward(v2);
		});
		
		// Delete
		$("#D").click(function(){
			var v3 = $("#ISUD_TYPE").val('De');
			forward(v3);		
		});
		
		//체크박스 체크 확인하기 
		function checkOnly(chk){
			// alert(">>> : " + chk);
			var chkObj = document.getElementsByName("bnumCheck");
			console.log("chkObj >>> : " + chkObj);
			for (var i=0; i < chkObj.length; i++){
				if (chkObj[i] != chk){
					chkObj[i].checked = false;
				}
			}
		}
		
		// 체크박스 체크 카운트
		function chkInfo(){			
			var obj = document.getElementsByName("bnumCheck");
			var nCnt = 0;			
			for(var i=0; i < obj.length; i++){ 
	          	if (obj[i].checked == true){ 
	          		nCnt++;
	          	}		          			            
	        }			
			console.log('nCnt : ' + nCnt);			
			return nCnt;
		}
		
		// 전송하기
		function forward(isud){
			$("#noticeSelectAllForm").attr({
					"action" : "testKck/notice?ISUD_TYPE="+isud
					,"method" : "GET"
					,"enctype" : "application/x-www-form-urlencoded"
			}).submit();
		}
	});
</script>
</head>
<% request.setCharacterEncoding("EUC-KR"); %>
SELECT ALL
<%
	Object obj = request.getAttribute("");
	if(obj == null) return;
	
	ArrayList<NoticeVO> aList = (ArrayList<NoticeVO>)obj;
	
	int nCnt = aList.size();
	out.println("전체 조회 건 수 : " + nCnt + " 건");
	
%>
<body>
<table>
	<tr>
		<td colspan="2">
		<font size="4" color="red">
		<img src="/testKck/img/ase.gif" width="25" height="25" alt="img" >
		NOTICE
		</font>
		</td>
	</tr>
</table>
<hr>
<hr>
<form name="noticeSelectAllForm" id="noticeSelectAllForm">
<table border="1">
<thead>
<tr>
	<td class="tt"><input type="checkbox" name="chkAll" id="chkAll"></td>
	<td class="li">순번</td>
	<td class="li">공지사항 번호</td>
	<td class="li">제목</td>
	<td class="li">내용</td>
	<td class="li">사진</td>
	<td class="li">삭제여부</td>
	<td class="li">등록일</td>
	<td class="li">수정일</td>
</tr>
</thead>
<%
	for(int i=0; i < nCnt; i++){
		
		NoticeVO nvo = aList.get(i);

%>
<tbody>
<tr>
	<td><input type="checkbox" id="bnumCheck" name="bnumCheck" value=<%= nvo.getNnum() %> onclick="checkOnly(this)"></td>
	<td class="li"><%= i + 1 %></td>
	<td class="li"><%= nvo.getNnum() %></td>
	<td class="li"><%= nvo.getNsubject() %></td>
	<td class="li"><%= nvo.getNmemo() %></td>
	<td class="li"><imgs src="/testKck/fileupload/notice/<%= nvo.getNphoto() %> " border="1" width="25" height="25" alt="image"></td>
	<td class="li"><%= nvo.getDeleteyn() %></td>
	<td class="li"><%= nvo.getInsertdate() %></td>
	<td class="li"><%= nvo.getUpdatedate() %></td>
</tr>
<%
	}
%>
<tr>
<td colspan="20" align="right">
	<input type="hidden" name="ISUD_TYPE" id="ISUD_TYPE" value="">
		<input type="button" value="등록" id="I">
		<input type="button" value="조회" id="SALL">
		<input type="button" value="수정" id="U">
		<input type="button" value="삭제" id="D">	
</tbody>

</table>

</form>
</body>
</html>