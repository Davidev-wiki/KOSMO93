[KckMember]

/*
		1. 쿼리 명령어로 테이블의 데이터를 불러오게 한다.
		2. 데이터를 저장한다 >> 어떻게? >> 컬럼별로 데이터 한개씩 >> 커서 함수를 이용한다
		3. 읽어들인 데이터를 깡통 클래스에 세팅한다.
		4. 깡통 클래스에서 데이터를 읽어온다.	
*/



package a.b.c.ch9.kckmem;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.util.ArrayList;

import a.b.c.ch9.kck.vo.KckMemberVO;
import a.b.c.common.KckConnProperty;

public class KckMember {

	// 쿼리문
	public static final String KMEM_SELECT = "SELECT * FROM KCK_MEMBER";
	// 멤버변수

	// 함수
	public ArrayList<KckMemberVO> kmemSelectALL() {

		Connection conn = null;
//		Statement stmt = null;
		PreparedStatement pstmt = null;
		ResultSet rsRs = null;

		ArrayList<KckMemberVO> aList = null;

		try {

			conn = KckConnProperty.getConnection();
			pstmt = conn.prepareStatement(KckMember.KMEM_SELECT);
			rsRs = pstmt.executeQuery();

			if (rsRs != null) {

				aList = new ArrayList<KckMemberVO>();

				while (rsRs.next()) {

					// 1회 루프 : 1행의 데이터
					KckMemberVO kvo = new KckMemberVO();
					kvo.setKNUM(rsRs.getString("KNUM"));
					kvo.setKNAME(rsRs.getString("KNAME"));
					kvo.setKID(rsRs.getString("KID"));
					kvo.setKPW(rsRs.getString("KPW"));
					kvo.setKBIRTH(rsRs.getString("KBIRTH"));
					kvo.setKGENDER(rsRs.getString("KGENDER"));
					kvo.setKTEL(rsRs.getString("KTEL"));
					kvo.setKHP(rsRs.getString("KHP"));
					kvo.setKEMAIL(rsRs.getString("KEMAIL"));
					kvo.setKADDR(rsRs.getString("KADDR"));
					kvo.setKHOBBY(rsRs.getString("KHOBBY"));
					kvo.setKPHOTO(rsRs.getString("KPHOTO"));
					kvo.setKSKILL(rsRs.getString("KSKILL"));
					kvo.setKJOB(rsRs.getString("KJOB"));
					kvo.setDELETEYN(rsRs.getString("DELETEYN"));
					kvo.setINSERTDATE(rsRs.getString("INSERTDATE"));
					kvo.setUPDATEDATE(rsRs.getString("UPDATEDATE"));

					// 1행의 데이터가 저장된 객체를 aList 배열에 넣는다.
					aList.add(kvo);
				}
			}
		} catch (Exception e) {
			System.out.println("디비연결 또는 쿼리에서 문제가 생겼슴 >>> : " + e.getMessage());
		}

		return aList;
	}

	public static void main(String[] args) {
		// TODO Auto-generated method stub

		KckMember kckm = new KckMember();

		ArrayList<KckMemberVO> aList = kckm.kmemSelectALL();

		if (aList != null && aList.size() > 0) {
			for (int i = 0; i < aList.size(); i++) {

				KckMemberVO kvo = aList.get(i);

				System.out.print(kvo.getKNUM() + " : ");
				System.out.print(kvo.getKNAME() + " : ");
				System.out.print(kvo.getKID() + " : ");
				System.out.print(kvo.getKPW() + " : ");
				System.out.print(kvo.getKBIRTH() + " : ");
				System.out.print(kvo.getKGENDER() + " : ");
				System.out.print(kvo.getKTEL() + " : ");
				System.out.print(kvo.getKHP() + " : ");
				System.out.print(kvo.getKEMAIL() + " : ");
				System.out.print(kvo.getKADDR() + " : ");
				System.out.print(kvo.getKHOBBY() + " : ");
				System.out.print(kvo.getKPHOTO() + " : ");
				System.out.print(kvo.getKSKILL() + " : ");
				System.out.print(kvo.getKJOB() + " : ");
				System.out.print(kvo.getDELETEYN() + " : ");
				System.out.print(kvo.getINSERTDATE() + " : ");
				System.out.println(kvo.getUPDATEDATE());
			}
		} else {
			System.out.println("aList 에 데이터가 없네요 >>> : " + aList);
		}
	}
}